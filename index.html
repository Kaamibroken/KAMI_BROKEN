<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Kami Flex - SIM Database</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="min-h-screen flex items-center justify-center bg-gradient-to-br from-indigo-200 via-purple-200 to-pink-200">

  <div class="bg-white/90 p-8 rounded-2xl shadow-xl max-w-lg w-full">
    <h2 class="text-3xl font-bold text-center mb-6">üì± SIM Database</h2>

    <!-- Search Input -->
    <div class="flex gap-2 mb-6">
      <input type="text" id="phoneInput" placeholder="Enter phone number ..." class="flex-1 px-4 py-2 border rounded-lg"/>
      <button onclick="searchSim()" class="px-6 py-2 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-lg">Search</button>
    </div>

    <!-- Result Card -->
    <div id="result" class="hidden bg-gray-100 p-4 rounded-xl shadow-inner">
      <h3 class="text-xl font-bold mb-2">Result:</h3>
      <p><strong>Name:</strong> <span id="resName"></span></p>
      <p><strong>Phone:</strong> <span id="resPhone"></span></p>
      <p><strong>CNIC:</strong> <span id="resCnic"></span></p>
      <p><strong>Network:</strong> <span id="resNetwork"></span></p>
    </div>
  </div>

  <!-- Popup Modal -->
  <div id="popup" class="fixed inset-0 flex items-center justify-center bg-black/50 hidden">
    <div class="bg-white p-6 rounded-2xl shadow-2xl w-80 text-center">
      <h3 id="popupTitle" class="text-xl font-bold mb-2">Title</h3>
      <p id="popupMessage" class="text-gray-600 mb-4">Message here...</p>
      <button onclick="closePopup()" class="px-6 py-2 rounded-full bg-gradient-to-r from-indigo-500 to-purple-500 text-white">OK</button>
    </div>
  </div>

  <script>
    // Popup functions
    function showPopup(title, message){
      document.getElementById("popupTitle").innerText = title;
      document.getElementById("popupMessage").innerText = message;
      document.getElementById("popup").classList.remove("hidden");
    }
    function closePopup(){
      document.getElementById("popup").classList.add("hidden");
    }

    // Search SIM function with API
    async function searchSim(){
      const phone = document.getElementById("phoneInput").value.trim();
      if(!phone){
        showPopup("‚ö†Ô∏è Warning", "Please enter a phone number!");
        return;
      }

      // show loading?
      // First try API
      try {
        const response = await fetch(`https://api.impossible-world.xyz/api/data?phone=${encodeURIComponent(phone)}`);
        if (!response.ok) {
          throw new Error("API returned error");
        }
        const data = await response.json();

        // Assume API returns object like { name, phone, cnic, network } or returns null if not found
        if (data && data.phone) {
          // show data
          document.getElementById("resName").innerText = data.name || "N/A";
          document.getElementById("resPhone").innerText = data.phone || phone;
          document.getElementById("resCnic").innerText = data.cnic || "N/A";
          document.getElementById("resNetwork").innerText = data.network || "N/A";
          document.getElementById("result").classList.remove("hidden");
        } else {
          // fallback to demo data or "not found"
          showPopup("‚ùå Not Found", "No record found for this number.");
          document.getElementById("result").classList.add("hidden");
        }
      } catch (err) {
        console.error("API error:", err);
        // fallback to demo data
        fallbackSearch(phone);
      }
    }

    // Demo fallback data
    const database = [
      {name:"Ali Khan", phone:"03001234567", cnic:"12345-6789012-3", network:"Jazz"},
      {name:"Sara Ahmed", phone:"03121234567", cnic:"98765-4321098-7", network:"Zong"},
      {name:"Usman Sheikh", phone:"03211234567", cnic:"45678-9876543-1", network:"Telenor"}
    ];

    function fallbackSearch(phone){
      const record = database.find(u => u.phone === phone);
      if(record){
        document.getElementById("resName").innerText = record.name;
        document.getElementById("resPhone").innerText = record.phone;
        document.getElementById("resCnic").innerText = record.cnic;
        document.getElementById("resNetwork").innerText = record.network;
        document.getElementById("result").classList.remove("hidden");
      } else {
        showPopup("‚ùå Not Found", "No record found for this number.");
        document.getElementById("result").classList.add("hidden");
      }
    }
  </script>
</body>
	</html>
